
数据链路层属于多计算机网络的底层。链路层使用的信道（向某一方向传送信息的媒体，物理层概念）主要有以下两种类型：
1. 点对点信道：这种信道使用一对一的点对点通信方式；
2. 广播信道：这种信道使用一对多的广播通信方式，因此过程比较复杂。

## 使用点对点信道的数据链路层
###一些概念
**链路**——一条无源的点到点的物理线路段。
**数据链路**——是一个逻辑的概念，指数据从数据发送点到数据接收点（点到点 point to point）所经过的信道。
**数据链路控制规程**——为使数据能迅速、正确、有效地从发送点到达接收点所采用的控制方式。
**数据帧**——就是数据链路层的协议数据单元。

数据链路层协议有很多，但所有的协议不可避免的三个问题是：封装成帧，透明传输和差错检验
## 封装成帧
封装成帧（framing）就是在一段数据的前面和后面分别添加首部和尾部，这样就构成了一个帧。
帧头和帧尾包含一些必要的控制信息，比如同步信息、地址信息、差错控制信息等；数据部分则包含网络层传下来的数据，比如IP数据包。
接收端在收到物理层上交的比特流后，就能根据首部和尾部的标记，从收到的比特流中识别帧的开始和结束。
首部和尾部的一个重要作用就是进行帧定界（确定帧的界限）。首部和尾部还包含许多必要的控制信息。
在发送帧时，是从帧首部开始发送。
为了提高帧的传输效率，应当使帧的数据部分长度尽可能大于首部和尾部的长度。
每一种链路层协议都规定了帧的数据部分的长度上限——最大传输单元MTU（Maximum Transfer Unit）
用控制字符进行帧定界

## 透明传输
发送端的数据链路层在数据中出现控制字符“SOH”或“EOT”的前面插入一个转义字符“ESC”(其十六进制编码是 1B)。

字节填充(byte stuffing)或字符填充(character stuffing)——接收端的数据链路层在将数据送往网络层之前删除插入的转义字符。

如果转义字符也出现数据当中，那么应在转义字符前面插入一个转义字符。当接收端收到连续的两个转义字符时，就删除其中前面的一个。 
字节填充解决透明传输的问题

## 差错检测
比特在传输过程中可能会产生差错。 
在一段时间内，传输错误的比特占所传输比特总数的比率称为误码率BER。为保证数据的可靠性，在计算机传输数据时，必须采用各种差错检测措施。目前数据链路层广泛使用了循环冗余检测CRC 

**循环冗余检验的原理**
在数据链路层传送的帧中，广泛使用了循环冗余检验 CRC 的检错技术。
在发送端，先把数据划分为组。假定每组 k 个比特。 
假设待传送的一组数据 M = 101001（现在 k = 6）。我们在 M 的后面再添加供差错检测用的 n 位冗余码一起发送。  

模2除法与算术除法类似，但每一位除的结果不影响其它位，即不向上一位借位，所以实际上就是异或。

**冗余码的计算**
2的n次方 乘 M 的运算，这相当于在 M 后面添加 n 个 0。
得到的 (k + n) 位的数除以事先选定好的长度为 (n + 1) 位的除数 P，得出商是 Q 而余数是 R，余数 R 比除数 P 少1 位，即 R 是 n 位。 

**R就是冗余码**

**冗余码的计算举例**
现在 k = 6, M = 101001。
设 n = 3, 除数 P = 1101，
被除数是 2的n次方 乘 M = 101001000。 
模 2 运算的结果是：商 Q = 110101，余数 R = 001。
把余数 R 作为冗余码添加在数据 M 的后面发送出去。发送的数据是：2的n次方 乘 M + R 
   即：101001001，共 (k + n) 位。 


**帧检验序列 FCS **
在数据后面添加上的冗余码称为帧检验序列 FCS (Frame Check Sequence)。
循环冗余检验 CRC 和帧检验序列 FCS并不等同。
CRC 是一种常用的检错方法，而 FCS 是添加在数据后面的冗余码。
FCS 可以用 CRC 这种方法得出，但 CRC 并非用来获得 FCS 的唯一方法。  


**对每一帧进行CRC检验**
在接收端把接收到的数据以帧为单位进行CRC检验：把收到的每一帧都除以同样的除数P（模2运算），然后检查得到的余数R。
(1) 若得出的余数 R = 0，则判定这个帧没有差错，就接受(accept)。
(2) 若余数 R ！= 0，则判定这个帧有差错，就丢弃。
但这种检测方法并不能确定究竟是哪一个或哪几个比特出现了差错。
只要经过严格的挑选，并使用位数足够多的除数 P，那么出现检测不到的差错的概率就很小很小。 


**循环冗余检验 CRC应注意的地方**
仅用循环冗余检验 CRC 差错检测技术只能做到无差错接受(accept)。
“无差错接受”是指：“凡是接受的帧（即不包括丢弃的帧），我们都能以非常接近于 1 的概率认为这些帧在传输过程中没有产生差错”。
也就是说：“凡是接收端数据链路层接受的帧都没有传输差错”（有差错的帧就丢弃而不接受）。
要做到“可靠传输”（即发送什么就收到什么）就必须再加上确认和重传机制。  

[数据链路层协议——点对点协议 PPP](http://my.oschina.net/xinxingegeya/blog/297774 "数据链路层协议——点对点协议 PPP")

[使用广播信道的数据链路层](http://my.oschina.net/xinxingegeya/blog/297822 "使用广播信道的数据链路层")

[使用广播信道的以太网](http://my.oschina.net/xinxingegeya/blog/297842 " 使用广播信道的以太网")